<script>
    // 快排序
    // 荷兰国旗问题

    let arr = [8, 5, 6, 7, 1, 2, 0, 1, 1]

    let num = 5;

    function main(arr) {
        return quickSort(arr, 0, arr.length - 1);
    }

    function quickSort(arr, L, R) {

        if (L < R) {
            swap(arr, L + (parseInt(Math.random() * (R - L + 1))), R);
            let p = partition(arr, L, R);
            quickSort(arr, L, p[0] - 1);
            quickSort(arr, p[1] + 1, R);
        }
        return arr;

    }

    function partition(arr, L, R) {
        let less = L - 1;
        let more = R
        while (L < more) {
            if (arr[L] < arr[R]) { // 当前数 < 划分值
                swap(arr, ++less, L++)
            } else if (arr[L] > arr[R]) { // 当前数 > 划分值
                swap(arr, --more, L)
            } else {
                L++
            }
        }
        swap(arr, more, R);
        return [less + 1, more]
    }


    function swap(arr, i, j) {
        let tmp = arr[i];
        arr[i] = arr[j];
        arr[j] = tmp;
    }

    console.log(main(arr));
</script>



<!-- <script>
    // 快排序
    // 荷兰国旗问题1

    // 给定一个数组arr, 和一个数num
    // 请把小于等于num的数放在数组的左边，大于num的数放在数组的右边

    let arr = [8, 5, 6, 7, 1, 2, 0, 1, 1]

    let num = 2;

    function main(arr) {
        let less = -1;
        let i = 0;
        while (i < arr.length) {
            if (arr[i] <= num) {
                swap(arr, ++less, i++);
            } else {
                i++
            }
        }
        return arr
    }

    function swap(arr, i, j) {
        let tmp = arr[i];
        arr[i] = arr[j];
        arr[j] = tmp;
    }

    console.log(main(arr));
</script> -->



<!-- <script>
    // 快排序
    // 荷兰国旗问题2

    // 给定一个数组arr, 和一个数num
    // 请把小于等于num的数放在数组的左边，大于num的数放在数组的右边
    // 等于num的数放中间

    let arr = [2, 3, 1, 2, 2, 2, 3]

    let num = 2

    function main(arr) {
        let less = -1;
        let more = arr.length;
        let i = 0;
        
        while (i < more) {
            if (arr[i] < num) {
                swap(arr, ++less, i++)
            } else if (arr[i] > num) {
                swap(arr, i, --more);
            } else {
                i++
            }
        }

        return arr
    }

    function swap(arr, i, j) {
        let tmp = arr[i];
        arr[i] = arr[j];
        arr[j] = tmp;
    }

    console.log(main(arr));
</script> -->